<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Alfonso Garcia-Caro">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <link href='https://fonts.googleapis.com/css?family=Josefin+Sans:400,300,600,700|Roboto+Mono' rel='stylesheet' type='text/css'>
    <link href="//fsprojects.github.io/Fable/content/custom.css" rel='stylesheet' type='text/css'>
    <script src="//fsprojects.github.io/Fable/content/tips.js"></script>
    <link rel="stylesheet" type="text/css" href="//fsprojects.github.io/Fable/content/snippets.css" />
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <script language="javascript" type="text/javascript">
      function init() {
          try {
            websocket = new WebSocket("ws://"+window.location.host+"/websocket");
            websocket.onmessage = function(evt) { location.reload(); };
          } catch(e) { /* For local development only */ }
      }
      window.addEventListener("load", init, false);
    </script>
    
  <title>Interacting with JavaScript - F# |> BABEL</title>
  <meta name="description" content="Fable features for easy interoperability">

</head>
<body>

  <div class="fb-navbar">
  <div class="container">
  <nav class="navbar navbar-default">
    <div class="navbar-wrapper">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="//fsprojects.github.io/Fable">Fable</a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class=""><a href="//fsprojects.github.io/Fable">home</a></li>
          <li class=""><a href="//fsprojects.github.io/Fable/samples.html">samples</a></li>
          <li class=""><a href="//fsprojects.github.io/Fable/docs.html">docs</a></li>
          <li><a href="https://github.com/fsprojects/Fable">source</a></li>
        </ul>
      </div>
    </div>
  </nav>
  </div>
  </div>

  <div class="fb-content-wrapper">
  
<div class="fb-heading">
<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <h1>Interacting with JavaScript</h1>
      <p>Fable features for easy interoperability</p>
    </div>
  </div>
</div>
</div>

<div class="container fb-content">
  <div class="row">
    <div class="col-md-1 col-lg-2"></div>
    <div class="col-sm-12 col-md-10 col-lg-8">
      <p>There are several ways to interact with the JavaScript world:</p>
<ul>
<li><a href="#dynamic-programming">Dynamic programming</a></li>
<li><a href="#foreign-interfaces">Foreign interfaces</a></li>
<li><a href="#special-attributes">Special attributes</a></li>
<li><a href="#calling-f-code-from-javascript">Calling F# code from JavaScript</a></li>
<li><a href="#json-serialization">JSON serialization</a></li>
<li><a href="#publishing-a-fable-package">Publishing a Fable package</a></li>
</ul>
<h2><a name="Dynamic-programming" class="anchor" href="#Dynamic-programming">Dynamic programming</a></h2>
<p><a href="https://github.com/fsprojects/Fable/blob/master/import/core/Fable.Core.fs">Fable.Core</a> implements the F# dynamic operators so
you can easily access an object property by name (without static check) as follows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">Fable</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">Core</span>

<span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="f">printfn</span> <span class="s">&quot;Value: </span><span class="pf">%O</span><span class="s">&quot;</span> <span class="i">jsObject</span><span class="o">?</span><span class="i">myProperty</span>

<span class="i">jsObject</span><span class="o">?</span><span class="i">myProperty</span> <span class="o">&lt;-</span> <span class="n">5</span> <span class="c">// Assignment is also possible</span>
</code></pre></td>
</tr>
</table>
<p>However, the F# compiler won't let you apply the property directly to other expressions.
For that, use the <code>$</code> operator and pass the arguments as a tuple.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">Fable</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs1', 3)" onmouseover="showTip(event, 'fs1', 3)" class="i">Core</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 4)" onmouseover="showTip(event, 'fs3', 4)" class="i">result</span> <span class="o">=</span> <span class="i">jsObject</span><span class="o">?</span><span class="i">myMethod</span> <span class="o">$</span> (<span class="n">1</span>, <span class="n">2</span>)
</code></pre></td>
</tr>
</table>
<p>If you want to call the function with the <code>new</code> keyword, use <code>Fable.Core.createNew</code> instead.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">Fable</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs1', 5)" onmouseover="showTip(event, 'fs1', 5)" class="i">Core</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs4', 6)" onmouseover="showTip(event, 'fs4', 6)" class="i">instance</span> <span class="o">=</span> <span class="i">createNew</span> <span class="i">jsObject</span><span class="o">?</span><span class="i">method</span> (<span class="n">1</span>, <span class="n">2</span>)
</code></pre></td>
</tr>
</table>
<p>And when you need to create JS object literals, use <code>createObj</code>:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">Fable</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs1', 7)" onmouseover="showTip(event, 'fs1', 7)" class="i">Core</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs5', 8)" onmouseover="showTip(event, 'fs5', 8)" class="i">data</span> <span class="o">=</span>
    <span class="i">createObj</span> [
        <span class="s">&quot;todos&quot;</span> <span class="o">==&gt;</span> <span class="i">Storage</span><span class="o">.</span><span class="i">fetch</span>()
        <span class="s">&quot;newTodo&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;&quot;</span>
        <span class="s">&quot;editedTodo&quot;</span> <span class="o">==&gt;</span> <span onmouseout="hideTip(event, 'fs6', 9)" onmouseover="showTip(event, 'fs6', 9)" class="i">None</span>
        <span class="s">&quot;visibility&quot;</span> <span class="o">==&gt;</span> <span class="s">&quot;all&quot;</span>
    ]
</code></pre></td>
</tr>
</table>
<h2><a name="Foreign-interfaces" class="anchor" href="#Foreign-interfaces">Foreign interfaces</a></h2>
<p>Defining a foreign interface is trivial: just create a F# interface and the
compiler will call its properties or methods by name. The tricky part is to
tell the compiler where the objects should be retrieved from. Normally, they
will be exposed as values of an imported module, so you just need to indicate
the compiler where this module is coming from using the <code>Import</code> attribute (see below).
For example, if you want to use <code>string_decoder</code> from node, just write:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">[&lt;<span class="i">Import</span>(<span class="s">&quot;*&quot;</span>,<span class="s">&quot;string_decoder&quot;</span>)&gt;]
<span class="k">module</span> <span class="t">string_decoder</span> <span class="o">=</span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs7', 10)" onmouseover="showTip(event, 'fs7', 10)" class="t">NodeStringDecoder</span> <span class="o">=</span>
        <span class="k">abstract</span> <span onmouseout="hideTip(event, 'fs8', 11)" onmouseover="showTip(event, 'fs8', 11)" class="f">write</span><span class="o">:</span> <span class="i">buffer</span><span class="o">:</span> <span class="i">Buffer</span> <span class="k">-&gt;</span> <span class="i">strings</span>
        <span class="k">abstract</span> <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="f">detectIncompleteChar</span><span class="o">:</span> <span class="i">buffer</span><span class="o">:</span> <span class="i">Buffer</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="t">float</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 14)" onmouseover="showTip(event, 'fs11', 14)" class="i">StringDecoder</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs7', 15)" onmouseover="showTip(event, 'fs7', 15)" class="t">NodeStringDecoder</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 16)" onmouseover="showTip(event, 'fs12', 16)" class="f">failwith</span> <span class="s">&quot;JS only&quot;</span>
</code></pre></td>
</tr>
</table>
<blockquote>
<p>If a method accepts a lambda make sure to use <code>System.Func</code> in the signature to force
the compiler <em>uncurry</em> any lambda passed as parameter (see below).</p>
</blockquote>
<p>A good starting point for foreign interfaces are <a href="http://definitelytyped.org">Typescript definition files</a>
and there's a script to make the bulk work of translating the file into F#. You can install it from npm.
See the <a href="https://www.npmjs.com/package/ts2fable">README</a> for more information.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="shell">npm install -g ts2fable
</code></pre></td></tr></table>
<p>You can find common definitions already parsed <a href="https://github.com/fsprojects/Fable/blob/master/import">here</a>.
Some of them are available in npm, just search for <code>fable-import</code> packages.</p>
<h2><a name="Special-attributes" class="anchor" href="#Special-attributes">Special attributes</a></h2>
<p>There are some attributes available in the <code>Fable.Core</code> namespace to ease the interaction with JS.</p>
<h3><a name="Emit-attribute" class="anchor" href="#Emit-attribute">Emit attribute</a></h3>
<p>You can use the <code>Emit</code> attribute to decorate a function. Every call to the
function will then be replaced <strong>inline</strong> by the content of the attribute
with the placeholders <code>$0</code>, <code>$1</code>, <code>$2</code>... replaced by the arguments. For example,
the following code will generate JavaScript as seen below.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">Fable</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs1', 17)" onmouseover="showTip(event, 'fs1', 17)" class="i">Core</span>

[&lt;<span class="i">Emit</span>(<span class="s">&quot;$0 + $1&quot;</span>)&gt;]
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 18)" onmouseover="showTip(event, 'fs13', 18)" class="f">add</span> (<span onmouseout="hideTip(event, 'fs14', 19)" onmouseover="showTip(event, 'fs14', 19)" class="i">x</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs15', 20)" onmouseover="showTip(event, 'fs15', 20)" class="t">int</span>) (<span onmouseout="hideTip(event, 'fs16', 21)" onmouseover="showTip(event, 'fs16', 21)" class="i">y</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs17', 22)" onmouseover="showTip(event, 'fs17', 22)" class="t">string</span>)<span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 23)" onmouseover="showTip(event, 'fs10', 23)" class="t">float</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 24)" onmouseover="showTip(event, 'fs12', 24)" class="f">failwith</span> <span class="s">&quot;JS only&quot;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs18', 25)" onmouseover="showTip(event, 'fs18', 25)" class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 26)" onmouseover="showTip(event, 'fs13', 26)" class="f">add</span> <span class="n">1</span> <span class="s">&quot;2&quot;</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="js"><span class="k">var</span> result <span class="o">=</span> <span class="n">1</span> <span class="o">+</span> <span class="s">"2"</span>
</code></pre></td></tr></table>
<p>When you don't know the exact number of arguments you can use the following syntax:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs19', 27)" onmouseover="showTip(event, 'fs19', 27)" class="t">Test</span>() <span class="o">=</span>
    [&lt;<span class="i">Emit</span>(<span class="s">&quot;$0($1...)&quot;</span>)&gt;]
    <span class="k">member</span> <span class="i">__</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 28)" onmouseover="showTip(event, 'fs20', 28)" class="f">Invoke</span>([&lt;<span class="i">ParamArray</span>&gt;] <span onmouseout="hideTip(event, 'fs21', 29)" onmouseover="showTip(event, 'fs21', 29)" class="i">args</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs15', 30)" onmouseover="showTip(event, 'fs15', 30)" class="t">int</span>[])<span class="o">:</span> <span onmouseout="hideTip(event, 'fs22', 31)" onmouseover="showTip(event, 'fs22', 31)" class="t">obj</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 32)" onmouseover="showTip(event, 'fs12', 32)" class="f">failwith</span> <span class="s">&quot;JS only&quot;</span>
</code></pre></td>
</tr>
</table>
<p>It's also possible to pass syntax conditioned to optional parameters.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs19', 33)" onmouseover="showTip(event, 'fs19', 33)" class="i">Test</span>() <span class="o">=</span>
    [&lt;<span class="i">Emit</span>(<span class="s">&quot;$0[$1]{{=$2}}&quot;</span>)&gt;]
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs23', 34)" onmouseover="showTip(event, 'fs23', 34)" class="i">__</span><span class="o">.</span><span class="i">Item</span> <span class="k">with</span> <span class="i">get</span>()<span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 35)" onmouseover="showTip(event, 'fs10', 35)" class="i">float</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 36)" onmouseover="showTip(event, 'fs12', 36)" class="i">failwith</span> <span class="s">&quot;JS only&quot;</span> <span class="k">and</span> <span onmouseout="hideTip(event, 'fs24', 37)" onmouseover="showTip(event, 'fs24', 37)" class="i">set</span>(<span class="i">v</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 38)" onmouseover="showTip(event, 'fs10', 38)" class="i">float</span>)<span class="o">:</span> <span onmouseout="hideTip(event, 'fs25', 39)" onmouseover="showTip(event, 'fs25', 39)" class="i">unit</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 40)" onmouseover="showTip(event, 'fs12', 40)" class="i">failwith</span> <span class="s">&quot;JS only&quot;</span>

    <span class="c">// This syntax means: if second arg evals to true in JS print &#39;i&#39; and nothing otherwise</span>
    [&lt;<span class="i">Emit</span>(<span class="s">&quot;new RegExp($0,&#39;g{{$1?i:}}&#39;)&quot;</span>)&gt;]
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs23', 41)" onmouseover="showTip(event, 'fs23', 41)" class="i">__</span><span class="o">.</span><span class="i">ParseRegex</span>(<span class="i">pattern</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs17', 42)" onmouseover="showTip(event, 'fs17', 42)" class="i">string</span>, <span class="o">?</span><span class="i">ignoreCase</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs26', 43)" onmouseover="showTip(event, 'fs26', 43)" class="i">bool</span>)<span class="o">:</span> <span class="i">Regex</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 44)" onmouseover="showTip(event, 'fs12', 44)" class="i">failwith</span> <span class="s">&quot;JS only&quot;</span>
</code></pre></td>
</tr>
</table>
<p>The content of <code>Emit</code> will actually be parsed by Babel so it will still be
validated somehow. However, it's not advised to abuse this method, as the
code in the template will remain obscure to Fable and may prevent some
optimizations.</p>
<h3><a name="Import-attribute" class="anchor" href="#Import-attribute">Import attribute</a></h3>
<p>The <code>Import</code> attribute can be applied to modules, types and even functions.
It will translate to <a href="https://developer.mozilla.org/en/docs/web/javascript/reference/statements/import">ES2015 import statements</a>,
which can be later transformed to <code>commonjs</code>, <code>amd</code> or <code>umd</code> imports by Babel.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="js"><span class="c">// Namespace imports</span>
[&lt;Import(<span class="s">"*"</span>, from=<span class="s">"my-module"</span>)<span class="o">&gt;</span>]          <span class="c">// F#</span>
import <span class="o">*</span> from <span class="s">"my-module"</span>                  <span class="c">// JS</span>

<span class="c">// Member imports</span>
[&lt;Import(<span class="s">"myFunction"</span>, from=<span class="s">"my-module"</span>)<span class="o">&gt;</span>] <span class="c">// F#</span>
import { myFunction } from <span class="s">"my-module"</span>     <span class="c">// JS</span>

<span class="c">// Default imports</span>
[&lt;Import(<span class="s">"default"</span>, from=<span class="s">"express"</span>)<span class="o">&gt;</span>]      <span class="c">// F#</span>
import express from express                <span class="c">// JS</span>
</code></pre></td></tr></table>
<blockquote>
<p>If the module or value is globally accessible in JavaScript,
you can use the <code>Global</code> attribute without parameters instead.</p>
</blockquote>
<h3><a name="Erase-attribute" class="anchor" href="#Erase-attribute">Erase attribute</a></h3>
<p>In TypeScript there's a concept of <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html#union-types">Union Types</a>
which differs from union types in F#. The former are just used to statically check a function argument
accepting different types. In Fable, they're translated as <strong>Erased Union Types</strong>
whose cases must have one and only one single data field. After compilation, the wrapping
will be erased and only the data field will remain. To define an erased union type, just attach
the <code>Erase</code> attribute to the type. Example:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">Fable</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs1', 45)" onmouseover="showTip(event, 'fs1', 45)" class="i">Core</span>

[&lt;<span class="i">Erase</span>&gt;]
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs27', 46)" onmouseover="showTip(event, 'fs27', 46)" class="t">MyErasedType</span> <span class="o">=</span>
    | <span onmouseout="hideTip(event, 'fs28', 47)" onmouseover="showTip(event, 'fs28', 47)" class="p">String</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs17', 48)" onmouseover="showTip(event, 'fs17', 48)" class="t">string</span>
    | <span onmouseout="hideTip(event, 'fs29', 49)" onmouseover="showTip(event, 'fs29', 49)" class="p">Number</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs15', 50)" onmouseover="showTip(event, 'fs15', 50)" class="t">int</span>

<span class="i">myLib</span><span class="o">.</span><span class="i">myMethod</span>(<span onmouseout="hideTip(event, 'fs30', 51)" onmouseover="showTip(event, 'fs30', 51)" class="i">String</span> <span class="s">&quot;test&quot;</span>)
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="js">myLib.myMethod(<span class="s">"test"</span>)
</code></pre></td></tr></table>
<p><code>Fable.Core</code> already includes predefined erased types which can be used as follows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">Fable</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs1', 52)" onmouseover="showTip(event, 'fs1', 52)" class="i">Core</span>

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs19', 53)" onmouseover="showTip(event, 'fs19', 53)" class="i">Test</span>() <span class="o">=</span>
    <span class="k">member</span> <span class="i">x</span><span class="o">.</span><span class="i">Value</span> <span class="o">=</span> <span class="s">&quot;Test&quot;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs31', 54)" onmouseover="showTip(event, 'fs31', 54)" class="f">myMethod</span> (<span onmouseout="hideTip(event, 'fs32', 55)" onmouseover="showTip(event, 'fs32', 55)" class="i">arg</span><span class="o">:</span> <span class="i">U3</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs17', 56)" onmouseover="showTip(event, 'fs17', 56)" class="i">string</span>, <span onmouseout="hideTip(event, 'fs15', 57)" onmouseover="showTip(event, 'fs15', 57)" class="i">int</span>, <span onmouseout="hideTip(event, 'fs19', 58)" onmouseover="showTip(event, 'fs19', 58)" class="i">Test</span><span class="o">&gt;</span>) <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs32', 59)" onmouseover="showTip(event, 'fs32', 59)" class="i">arg</span> <span class="k">with</span>
    | <span class="i">U3</span><span class="o">.</span><span class="i">Case1</span> <span class="i">s</span> <span class="k">-&gt;</span> <span class="i">s</span>
    | <span class="i">U3</span><span class="o">.</span><span class="i">Case2</span> <span class="i">i</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs17', 60)" onmouseover="showTip(event, 'fs17', 60)" class="i">string</span> <span class="i">i</span>
    | <span class="i">U3</span><span class="o">.</span><span class="i">Case3</span> <span class="i">t</span> <span class="k">-&gt;</span> <span class="i">t</span><span class="o">.</span><span class="i">Value</span>
</code></pre></td>
</tr>
</table>
<h3><a name="StringEnum-attribute" class="anchor" href="#StringEnum-attribute">StringEnum attribute</a></h3>
<p>Similarly, in TypeScript it's possible to define <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html#string-literal-types">String Literal Types</a>
which are similar to enumerations with an underlying string value.
Fable allows the same feature by using union types and the <code>StringEnum</code> attribute.
These union types must not have any data fields as they will be compiled
to a string matching the name of the union case.</p>
<p>By default, the compiled string will have the first letter lowered.
If you want to prevent this or use a different text than the union
case name, use the <code>CompiledName</code> attribute:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">Fable</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs1', 61)" onmouseover="showTip(event, 'fs1', 61)" class="i">Core</span>

[&lt;<span class="i">StringEnum</span>&gt;]
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs33', 62)" onmouseover="showTip(event, 'fs33', 62)" class="t">MyStrings</span> <span class="o">=</span>
    | <span onmouseout="hideTip(event, 'fs34', 63)" onmouseover="showTip(event, 'fs34', 63)" class="p">Vertical</span>
    | [&lt;<span onmouseout="hideTip(event, 'fs35', 64)" onmouseover="showTip(event, 'fs35', 64)" class="t">CompiledName</span>(<span class="s">&quot;Horizontal&quot;</span>)&gt;] <span onmouseout="hideTip(event, 'fs36', 65)" onmouseover="showTip(event, 'fs36', 65)" class="p">Horizontal</span>

<span class="i">myLib</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 66)" onmouseover="showTip(event, 'fs31', 66)" class="i">myMethod</span>(<span class="i">Vertical</span>, <span onmouseout="hideTip(event, 'fs36', 67)" onmouseover="showTip(event, 'fs36', 67)" class="i">Horizontal</span>)
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="js">myLib.myMethod(<span class="s">"vertical"</span>, <span class="s">"Horizontal"</span>)
</code></pre></td></tr></table>
<h3><a name="KeyValueList-attribute" class="anchor" href="#KeyValueList-attribute">KeyValueList attribute</a></h3>
<p>Many JS libraries accept a plain object to specify different options.
With Fable, you can use union types to define these options in a more
static-safe and F#-idiomatic manner. The union cases of a type with the
<code>KeyValueList</code> attribute act as a key value pair, so they should have a
single data field (if there's no data field the value is assumed to be <code>true</code>).
When Fable encounters a <strong>list</strong> of such an union type, it will compile it as
a plain JS object.</p>
<p>As with <code>StringEnum</code> the first letter of the key (the union case name)
will be lowered. Again, you can modify this behaviour with the <code>CompiledName</code>
attribute.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">Fable</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs1', 68)" onmouseover="showTip(event, 'fs1', 68)" class="i">Core</span>

[&lt;<span class="i">KeyValueList</span>&gt;]
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs37', 69)" onmouseover="showTip(event, 'fs37', 69)" class="t">MyOptions</span> <span class="o">=</span>
    | <span onmouseout="hideTip(event, 'fs38', 70)" onmouseover="showTip(event, 'fs38', 70)" class="p">Flag1</span>
    | <span onmouseout="hideTip(event, 'fs39', 71)" onmouseover="showTip(event, 'fs39', 71)" class="p">Name</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs17', 72)" onmouseover="showTip(event, 'fs17', 72)" class="t">string</span>
    | [&lt;<span onmouseout="hideTip(event, 'fs35', 73)" onmouseover="showTip(event, 'fs35', 73)" class="t">CompiledName</span>(<span class="s">&quot;QTY&quot;</span>)&gt;] <span onmouseout="hideTip(event, 'fs40', 74)" onmouseover="showTip(event, 'fs40', 74)" class="p">QTY</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs15', 75)" onmouseover="showTip(event, 'fs15', 75)" class="t">int</span>

<span class="i">myLib</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 76)" onmouseover="showTip(event, 'fs31', 76)" class="i">myMethod</span> [
    <span class="i">Name</span> <span class="s">&quot;Fable&quot;</span>
    <span onmouseout="hideTip(event, 'fs40', 77)" onmouseover="showTip(event, 'fs40', 77)" class="i">QTY</span> <span class="n">5</span>
    <span class="i">Flag1</span>
]
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="js">myLib.myMethod({
    name: <span class="s">"Fable"</span>,
    QTY: <span class="n">5</span>,
    flag<span class="n">1</span>: <span class="k">true</span>
})
</code></pre></td></tr></table>
<p>If necessary you can cheat the compiler using tuples:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">myLib</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 78)" onmouseover="showTip(event, 'fs31', 78)" class="i">myMethod</span> [<span onmouseout="hideTip(event, 'fs39', 79)" onmouseover="showTip(event, 'fs39', 79)" class="i">Name</span> <span class="s">&quot;Fable&quot;</span>; <span onmouseout="hideTip(event, 'fs41', 80)" onmouseover="showTip(event, 'fs41', 80)" class="i">unbox</span>(<span class="s">&quot;level&quot;</span>, <span class="n">4</span>)]
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="js">myLib.myMethod({ name: <span class="s">"Fable"</span>, level: <span class="n">4</span> })
</code></pre></td></tr></table>
<p>As these lists will be compiled as JS objects, please note you
cannot apply the usual list operations to them (e.g. appending).
If you want to manipulate the "fake" lists you must implement the
methods yourself. For example:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">[&lt;<span class="i">KeyValueList</span>&gt;]
<span class="k">type</span> <span class="i">CSSProp</span> <span class="o">=</span>
    | <span class="i">Border</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs17', 81)" onmouseover="showTip(event, 'fs17', 81)" class="i">string</span>
    | <span class="i">Display</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs17', 82)" onmouseover="showTip(event, 'fs17', 82)" class="i">string</span>

[&lt;<span class="i">Emit</span>(<span class="s">&quot;Object.assign({}, $0, $1)&quot;</span>)&gt;]
<span class="k">let</span> ( <span class="o">++</span> ) (<span class="i">a</span><span class="o">:</span><span class="o">&#39;</span><span class="i">a</span> <span onmouseout="hideTip(event, 'fs42', 83)" onmouseover="showTip(event, 'fs42', 83)" class="i">list</span>) (<span class="i">b</span><span class="o">:</span><span class="o">&#39;</span><span class="i">a</span> <span onmouseout="hideTip(event, 'fs42', 84)" onmouseover="showTip(event, 'fs42', 84)" class="i">list</span>) <span class="o">:</span> <span class="o">&#39;</span><span class="i">a</span> <span onmouseout="hideTip(event, 'fs42', 85)" onmouseover="showTip(event, 'fs42', 85)" class="i">list</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 86)" onmouseover="showTip(event, 'fs12', 86)" class="i">failwith</span> <span class="s">&quot;JS Only&quot;</span>

<span class="k">let</span> <span class="i">niceBorder</span> <span class="o">=</span> [ <span class="i">Border</span> <span class="s">&quot;1px solid blue&quot;</span> ]
<span class="k">let</span> <span class="i">style</span> <span class="o">=</span> [ <span class="i">Display</span> <span class="s">&quot;inline-block&quot;</span> ] <span class="o">++</span> <span class="i">niceBorder</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Calling-F-code-from-JavaScript" class="anchor" href="#Calling-F-code-from-JavaScript">Calling F# code from JavaScript</a></h2>
<p>The F# compiler compiles type and module members as usual for an OOP
language like C#, no matter whether the arguments are curried or tupled.
Thanks to this, they can be called "normally" from an external language
like C# or JavaScript. For example:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">module</span> <span class="i">MyModule</span> <span class="o">=</span>
    <span class="k">let</span> <span class="i">myCurriedFunction</span> <span class="i">a</span> <span class="i">b</span> <span class="o">=</span> <span class="i">a</span> <span class="o">+</span> <span class="i">b</span>
    <span class="k">let</span> <span class="i">myTupledFunction</span>(<span class="i">a</span>, <span class="i">b</span>) <span class="o">=</span> <span class="i">a</span> <span class="o">+</span> <span class="i">b</span>

<span class="k">type</span> <span class="i">MyType</span>() <span class="o">=</span>
    <span class="k">member</span> <span class="i">x</span><span class="o">.</span><span class="i">MyCurriedMethod</span> <span class="i">a</span> <span class="i">b</span> <span class="o">=</span> <span class="i">a</span> <span class="o">+</span> <span class="i">b</span>
    <span class="k">member</span> <span class="i">x</span><span class="o">.</span><span class="i">MyTupledMethod</span>(<span class="i">a</span>, <span class="i">b</span>) <span class="o">=</span> <span class="i">a</span> <span class="o">+</span> <span class="i">b</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="js"><span class="c">// From JS</span>
<span class="k">var</span> lib <span class="o">=</span> require(<span class="s">"lib/myFSLib"</span>);
console.log(lib.MyModule.myCurriedFunction(<span class="n">2</span>, <span class="n">2</span>));  <span class="c">// 4</span>
console.log(lib.MyModule.myTupledFunction(<span class="n">2</span>, <span class="n">2</span>));   <span class="c">// 4</span>

<span class="k">var</span> x <span class="o">=</span> <span class="k">new</span> lib.MyType();
console.log(x.MyCurriedMethod(<span class="n">2</span>, <span class="n">2</span>));               <span class="c">// 4</span>
console.log(x.MyTupledMethod(<span class="n">2</span>, <span class="n">2</span>));                <span class="c">// 4</span>
</code></pre></td></tr></table>
<p>Things get a bit more complicated with anonymous lambdas, inner functions,
partial applications or even just top level function references, as they do
follow proper F# semantics. For example, check how the following code is compiled:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="i">topLevelFn1</span> <span class="i">a</span> <span class="i">b</span> <span class="i">c</span> <span class="o">=</span> <span class="i">a</span> <span class="o">+</span> <span class="i">b</span> <span class="o">+</span> <span class="i">c</span>
<span class="k">let</span> <span class="i">topLevelFn2</span>(<span class="i">a</span>, <span class="i">b</span>, <span class="i">c</span>) <span class="o">=</span> <span class="i">a</span> <span class="o">+</span> <span class="i">b</span> <span class="o">+</span> <span class="i">c</span>

<span class="k">let</span> <span class="i">test</span>() <span class="o">=</span>
    <span class="c">// Note we&#39;re now within a function&#39;s scope</span>
    <span class="k">let</span> <span class="i">f1</span> <span class="i">a</span> <span class="i">b</span> <span class="o">=</span> <span class="i">a</span> <span class="o">+</span> <span class="i">b</span>
    <span class="k">let</span> <span class="i">f2</span>(<span class="i">a</span>, <span class="i">b</span>) <span class="o">=</span> <span class="i">a</span> <span class="o">+</span> <span class="i">b</span>
    <span class="k">let</span> <span class="i">f3</span> <span class="o">=</span> <span class="k">fun</span> <span class="i">a</span> <span class="i">b</span> <span class="k">-&gt;</span> <span class="i">a</span> <span class="o">+</span> <span class="i">b</span>
    <span class="k">let</span> <span class="i">f4</span> <span class="o">=</span> <span class="i">topLevelFn1</span> <span class="n">2</span>
    <span class="k">let</span> <span class="i">f5</span> <span class="o">=</span> <span class="i">topLevelFn2</span>
    <span class="i">f1</span> <span class="n">2</span> <span class="n">2</span>      <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs43', 87)" onmouseover="showTip(event, 'fs43', 87)" class="i">ignore</span>
    <span class="i">f2</span>(<span class="n">2</span>, <span class="n">2</span>)    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs43', 88)" onmouseover="showTip(event, 'fs43', 88)" class="i">ignore</span>
    <span class="i">f3</span> <span class="n">2</span> <span class="n">2</span>      <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs43', 89)" onmouseover="showTip(event, 'fs43', 89)" class="i">ignore</span>
    <span class="i">f4</span> <span class="n">2</span> <span class="n">2</span>      <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs43', 90)" onmouseover="showTip(event, 'fs43', 90)" class="i">ignore</span>
    <span class="i">f5</span>(<span class="n">2</span>, <span class="n">2</span>, <span class="n">2</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs43', 91)" onmouseover="showTip(event, 'fs43', 91)" class="i">ignore</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="js"><span class="k">function</span> test() {
    <span class="k">var</span> f<span class="n">1</span> <span class="o">=</span> <span class="k">function</span> (a) {
        <span class="k">return</span> <span class="k">function</span> (b) {
            <span class="k">return</span> a <span class="o">+</span> b;
        };
    };
    <span class="k">var</span> f<span class="n">2</span> <span class="o">=</span> <span class="k">function</span> (tupledArg) {
        <span class="k">return</span> tupledArg[<span class="n">0</span>] <span class="o">+</span> tupledArg[<span class="n">1</span>];
    };
    <span class="k">var</span> f<span class="n">3</span> <span class="o">=</span> <span class="k">function</span> (a) {
        <span class="k">return</span> <span class="k">function</span> (b) {
            <span class="k">return</span> a <span class="o">+</span> b;
        };
    };
    <span class="k">var</span> f<span class="n">4</span> <span class="o">=</span> <span class="k">function</span> (b) {
        <span class="k">return</span> <span class="k">function</span> (c) {
            <span class="k">return</span> topLevelFn<span class="n">1</span>(<span class="n">2</span>, b, c);
        };
    };
    <span class="k">var</span> f<span class="n">5</span> <span class="o">=</span> <span class="k">function</span> (tupledArg) {
        <span class="k">return</span> topLevelFn<span class="n">2</span>(tupledArg[<span class="n">0</span>], tupledArg[<span class="n">1</span>], tupledArg[<span class="n">2</span>]);
    };
    f<span class="n">1</span>(<span class="n">2</span>)(<span class="n">2</span>);    <span class="c">// Double application</span>
    f<span class="n">2</span>([<span class="n">2</span>, <span class="n">2</span>]);  <span class="c">// Tupled arg</span>
    f<span class="n">3</span>(<span class="n">2</span>)(<span class="n">2</span>);    <span class="c">// Inner functions and anonymous lambdas are the same</span>
    f<span class="n">4</span>(<span class="n">2</span>)(<span class="n">2</span>);    <span class="c">// Partial application</span>
    f<span class="n">5</span>([<span class="n">2</span>,<span class="n">2</span>,<span class="n">2</span>]); <span class="c">// Top level functions get wrapped when referenced</span>
}
</code></pre></td></tr></table>
<p>This means you need to be careful when passing a lambda with more than
one argument to JS, as they will probably not be called correctly. To prevent
this you must convert the lambda to a delegate (<code>System.Func&lt;...&gt;</code>), the same
way you would do when interacting with C#.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="i">f1</span> <span class="i">a</span> <span class="i">b</span> <span class="o">=</span> <span class="i">a</span> <span class="o">+</span> <span class="i">b</span>

<span class="i">jsObj</span><span class="o">?</span><span class="i">callback1</span> <span class="o">&lt;-</span> <span class="i">f1</span> <span class="c">// produces curried version, probably not what you want</span>
<span class="i">jsObj</span><span class="o">?</span><span class="i">callback2</span> <span class="o">&lt;-</span> <span class="i">Func</span><span class="o">&lt;</span>_,_,_<span class="o">&gt;</span> <span class="i">f1</span> <span class="c">// creates a delegate instead</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="javascript">jsObj.callback<span class="n">1</span> <span class="o">=</span> <span class="k">function</span> (a) {
    <span class="k">return</span> <span class="k">function</span> (b) {
        <span class="k">return</span> f<span class="n">1</span>(a, b);
    };
};

jsObj.callback<span class="n">2</span> <span class="o">=</span> <span class="k">function</span> (delegateArg<span class="n">0</span>, delegateArg<span class="n">1</span>) {
    <span class="k">return</span> f<span class="n">1</span>(delegateArg<span class="n">0</span>, delegateArg<span class="n">1</span>);
};
</code></pre></td></tr></table>
<p>If the signature of the method you're calling accepts a delegate instead
of a F# lambda, the conversion is done automatically for you.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">IForeign</span> <span class="o">=</span>
    <span class="k">abstract</span> <span onmouseout="hideTip(event, 'fs31', 92)" onmouseover="showTip(event, 'fs31', 92)" class="i">myMethod</span><span class="o">:</span> <span class="i">Func</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs15', 93)" onmouseover="showTip(event, 'fs15', 93)" class="i">int</span>, <span onmouseout="hideTip(event, 'fs15', 94)" onmouseover="showTip(event, 'fs15', 94)" class="i">int</span><span class="o">&gt;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs25', 95)" onmouseover="showTip(event, 'fs25', 95)" class="i">unit</span>

<span class="i">foreignObj</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 96)" onmouseover="showTip(event, 'fs31', 96)" class="i">myMethod</span>(<span class="k">fun</span> <span class="i">a</span> <span class="i">b</span> <span class="k">-&gt;</span> <span class="i">a</span> <span class="o">+</span> <span class="i">b</span>)
</code></pre></td>
</tr>
</table>
<blockquote>
<p>Note: If you still experience problems make the conversion explicit
as in the above example.</p>
</blockquote>
<h2><a name="JSON-serialization" class="anchor" href="#JSON-serialization">JSON serialization</a></h2>
<p>It's possible to use <code>JSON.stringify</code> and <code>JSON.parse</code> to serialize objects back
and forth, particularly with record and union types. Records will serialize as plain
JS objects and unions will be serialized the same way as with <a href="http://www.newtonsoft.com/json">Json.NET</a>,
making it easier to interact with a .NET server.</p>
<p>The only problem is <code>JSON.parse</code> will produce a plain JS object which won't work if
you need to type test it or access the prototype members. When this is necessary, you
can use <code>toJson</code> and <code>ofJson</code> functions in <code>Fable.Core.Serialize</code> module. This will
save the type full name in a <code>__type</code> field so Fable will know which type to construct
when deserializing:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">Fable</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs1', 97)" onmouseover="showTip(event, 'fs1', 97)" class="i">Core</span>

<span class="k">type</span> <span class="i">Tree</span> <span class="o">=</span>
    | <span class="i">Leaf</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs15', 98)" onmouseover="showTip(event, 'fs15', 98)" class="i">int</span>
    | <span class="i">Branch</span> <span class="k">of</span> <span class="i">Tree</span>[]
    <span class="k">member</span> <span class="i">this</span><span class="o">.</span><span class="i">Sum</span>() <span class="o">=</span>
        <span class="k">match</span> <span class="i">this</span> <span class="k">with</span>
        | <span class="i">Leaf</span> <span class="i">i</span> <span class="k">-&gt;</span> <span class="i">i</span>
        | <span class="i">Branch</span> <span class="i">trees</span> <span class="k">-&gt;</span>
            <span class="i">trees</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs44', 99)" onmouseover="showTip(event, 'fs44', 99)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs45', 100)" onmouseover="showTip(event, 'fs45', 100)" class="i">map</span> (<span class="k">fun</span> <span class="i">x</span> <span class="k">-&gt;</span> <span class="i">x</span><span class="o">.</span><span class="i">Sum</span>()) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs44', 101)" onmouseover="showTip(event, 'fs44', 101)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 102)" onmouseover="showTip(event, 'fs46', 102)" class="i">sum</span>

<span class="k">let</span> <span class="i">tree</span> <span class="o">=</span>
    <span class="i">Branch</span> [|<span class="i">Leaf</span> <span class="n">1</span>; <span class="i">Leaf</span> <span class="n">2</span>; <span class="i">Branch</span> [|<span class="i">Leaf</span> <span class="n">3</span>; <span class="i">Leaf</span> <span class="n">4</span>|]|]

<span class="k">let</span> <span class="i">json</span> <span class="o">=</span> <span class="i">Serialize</span><span class="o">.</span><span class="i">toJson</span> <span class="i">tree</span>
<span class="k">let</span> <span class="i">tree2</span> <span class="o">=</span> <span class="i">Serialize</span><span class="o">.</span><span class="i">ofJson</span><span class="o">&lt;</span><span class="i">Tree</span><span class="o">&gt;</span> <span class="i">json</span>

<span class="k">let</span> <span class="i">typeTest</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs47', 103)" onmouseover="showTip(event, 'fs47', 103)" class="i">box</span> <span class="i">tree2</span> <span class="o">:?</span> <span class="i">Tree</span>    <span class="c">// Type is kept</span>
<span class="k">let</span> <span class="i">sum</span> <span class="o">=</span> <span class="i">tree2</span><span class="o">.</span><span class="i">Sum</span>()   <span class="c">// Prototype members can be accessed</span>
</code></pre></td>
</tr>
</table>
<blockquote>
<p>This will work when exchanging objects with a server, if the
server includes the type full name in a <code>__type</code> field and the
client code knows the type definiton.</p>
</blockquote>
<p>At the moment, there are the following caveats:</p>
<ul>
<li>Only works with records, unions and types with an argumentless primary constructor.</li>
<li>Doesn't work with lists, maps or sets.</li>
<li>Arrays will always be deserialized as dynamic JS arrays, not typed arrays.</li>
</ul>
<h2><a name="Publishing-a-Fable-package" class="anchor" href="#Publishing-a-Fable-package">Publishing a Fable package</a></h2>
<p>See <a href="https://www.npmjs.com/package/fable-helpers-sample">fable-helpers-sample</a> to know how to publish a Fable package.</p>


<div class="tip" id="fs1">namespace Microsoft.FSharp.Core</div>
<div class="tip" id="fs2">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fs3">val result : obj<br /><br />Full name: interacting.result</div>
<div class="tip" id="fs4">val instance : &#39;a<br /><br />Full name: interacting.instance</div>
<div class="tip" id="fs5">val data : &#39;a<br /><br />Full name: interacting.data</div>
<div class="tip" id="fs6">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs7">type NodeStringDecoder =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member detectIncompleteChar : buffer:&#39;a0 -&gt; float<br />&#160;&#160;&#160;&#160;abstract member write : buffer:&#39;a0 -&gt; &#39;a1<br />&#160;&#160;end<br /><br />Full name: interacting.string_decoder.NodeStringDecoder</div>
<div class="tip" id="fs8">abstract member NodeStringDecoder.write : buffer:&#39;a0 -&gt; &#39;a1<br /><br />Full name: interacting.string_decoder.NodeStringDecoder.write</div>
<div class="tip" id="fs9">abstract member NodeStringDecoder.detectIncompleteChar : buffer:&#39;a0 -&gt; float<br /><br />Full name: interacting.string_decoder.NodeStringDecoder.detectIncompleteChar</div>
<div class="tip" id="fs10">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = System.Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs11">val StringDecoder : NodeStringDecoder<br /><br />Full name: interacting.string_decoder.StringDecoder</div>
<div class="tip" id="fs12">val failwith : message:string -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.Operators.failwith</div>
<div class="tip" id="fs13">val add : x:int -&gt; y:string -&gt; float<br /><br />Full name: interacting.add</div>
<div class="tip" id="fs14">val x : int</div>
<div class="tip" id="fs15">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs16">val y : string</div>
<div class="tip" id="fs17">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = System.String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs18">val result : float<br /><br />Full name: interacting.result</div>
<div class="tip" id="fs19">Multiple items<br />type Test =<br />&#160;&#160;new : unit -&gt; Test<br />&#160;&#160;member Invoke : args:int [] -&gt; obj<br /><br />Full name: interacting.Test<br /><br />--------------------<br />new : unit -&gt; Test</div>
<div class="tip" id="fs20">member Test.Invoke : args:int [] -&gt; obj<br /><br />Full name: interacting.Test.Invoke</div>
<div class="tip" id="fs21">val args : int []</div>
<div class="tip" id="fs22">type obj = System.Object<br /><br />Full name: Microsoft.FSharp.Core.obj</div>
<div class="tip" id="fs23">val __ : Test</div>
<div class="tip" id="fs24">val set : elements:seq&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.set</div>
<div class="tip" id="fs25">type unit = Unit<br /><br />Full name: Microsoft.FSharp.Core.unit</div>
<div class="tip" id="fs26">type bool = System.Boolean<br /><br />Full name: Microsoft.FSharp.Core.bool</div>
<div class="tip" id="fs27">type MyErasedType =<br />&#160;&#160;| String of string<br />&#160;&#160;| Number of int<br /><br />Full name: interacting.MyErasedType</div>
<div class="tip" id="fs28">Multiple items<br />union case MyErasedType.String: string -&gt; MyErasedType<br /><br />--------------------<br />module String<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fs29">union case MyErasedType.Number: int -&gt; MyErasedType</div>
<div class="tip" id="fs30">module String<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fs31">val myMethod : arg:&#39;a -&gt; &#39;b<br /><br />Full name: interacting.myMethod</div>
<div class="tip" id="fs32">val arg : &#39;a</div>
<div class="tip" id="fs33">type MyStrings =<br />&#160;&#160;| Vertical<br />&#160;&#160;| Horizontal<br /><br />Full name: interacting.MyStrings</div>
<div class="tip" id="fs34">union case MyStrings.Vertical: MyStrings</div>
<div class="tip" id="fs35">Multiple items<br />type CompiledNameAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : compiledName:string -&gt; CompiledNameAttribute<br />&#160;&#160;member CompiledName : string<br /><br />Full name: Microsoft.FSharp.Core.CompiledNameAttribute<br /><br />--------------------<br />new : compiledName:string -&gt; CompiledNameAttribute</div>
<div class="tip" id="fs36">union case MyStrings.Horizontal: MyStrings</div>
<div class="tip" id="fs37">type MyOptions =<br />&#160;&#160;| Flag1<br />&#160;&#160;| Name of string<br />&#160;&#160;| QTY of int<br /><br />Full name: interacting.MyOptions</div>
<div class="tip" id="fs38">union case MyOptions.Flag1: MyOptions</div>
<div class="tip" id="fs39">union case MyOptions.Name: string -&gt; MyOptions</div>
<div class="tip" id="fs40">union case MyOptions.QTY: int -&gt; MyOptions</div>
<div class="tip" id="fs41">val unbox : value:obj -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.Operators.unbox</div>
<div class="tip" id="fs42">type &#39;T list = List&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.list&lt;_&gt;</div>
<div class="tip" id="fs43">val ignore : value:&#39;T -&gt; unit<br /><br />Full name: Microsoft.FSharp.Core.Operators.ignore</div>
<div class="tip" id="fs44">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs45">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.map</div>
<div class="tip" id="fs46">val sum : source:seq&lt;&#39;T&gt; -&gt; &#39;T (requires member ( + ) and member get_Zero)<br /><br />Full name: Microsoft.FSharp.Collections.Seq.sum</div>
<div class="tip" id="fs47">val box : value:&#39;T -&gt; obj<br /><br />Full name: Microsoft.FSharp.Core.Operators.box</div>

    </div>
    <div class="col-md-1 col-lg-2"></div>
  </div>
</div>

  </div>

  <a class="gh-forkme" href="https://github.com/fsprojects/Fable"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
</body>
</html>
